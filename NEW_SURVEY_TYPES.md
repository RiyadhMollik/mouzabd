# New Survey Types Added

## üéØ Overview

Added **5 new survey types** to the pricing system, expanding from 5 to 10 total survey types.

## ‚úÖ New Survey Types Added

### 1. **DIYARA (‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ)**
- **Code**: `DIYARA`
- **Display Name**: ‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá
- **Price**: ‡ß≥15.00 per file
- **Description**: ‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø

### 2. **RS_BS (RS/BS)**
- **Code**: `RS_BS`
- **Display Name**: RS/BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá
- **Price**: ‡ß≥20.00 per file
- **Description**: RS ‡¶è‡¶¨‡¶Ç BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø

### 3. **BS_RS (BS/RS)**
- **Code**: `BS_RS`
- **Display Name**: BS/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá
- **Price**: ‡ß≥20.00 per file
- **Description**: BS ‡¶è‡¶¨‡¶Ç RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø

### 4. **CS_SA (CS/SA)**
- **Code**: `CS_SA`
- **Display Name**: CS/SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá
- **Price**: ‡ß≥18.00 per file
- **Description**: CS ‡¶è‡¶¨‡¶Ç SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø

### 5. **SA_CS (SA/CS)**
- **Code**: `SA_CS`
- **Display Name**: SA/CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá
- **Price**: ‡ß≥18.00 per file
- **Description**: SA ‡¶è‡¶¨‡¶Ç CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø

## üìä Complete Survey Type Pricing Table

| Survey Type | Display Name | Price per File | Sort Order |
|-------------|--------------|----------------|------------|
| SA_RS | SA/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá | ‡ß≥15.00 | 1 |
| CS | CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá | ‡ß≥20.00 | 2 |
| BS | BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá | ‡ß≥25.00 | 3 |
| SA | SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá | ‡ß≥15.00 | 4 |
| RS | RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá | ‡ß≥15.00 | 5 |
| **DIYARA** | **‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá** | **‡ß≥15.00** | **6** ‚ú® NEW |
| **RS_BS** | **RS/BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá** | **‡ß≥20.00** | **7** ‚ú® NEW |
| **BS_RS** | **BS/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá** | **‡ß≥20.00** | **8** ‚ú® NEW |
| **CS_SA** | **CS/SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá** | **‡ß≥18.00** | **9** ‚ú® NEW |
| **SA_CS** | **SA/CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá** | **‡ß≥18.00** | **10** ‚ú® NEW |

## üí∞ Price Breakdown

### ‡ß≥15.00 per file:
- SA_RS
- SA
- RS
- **DIYARA** ‚ú® NEW

### ‡ß≥18.00 per file:
- **CS_SA** ‚ú® NEW
- **SA_CS** ‚ú® NEW

### ‡ß≥20.00 per file:
- CS
- **RS_BS** ‚ú® NEW
- **BS_RS** ‚ú® NEW

### ‡ß≥25.00 per file:
- BS

## üîÑ Changes Made

### 1. Backend: `populate_survey_pricing.py`
Added 5 new entries to the survey types data:

```python
{
    'survey_type': 'DIYARA',
    'display_name': '‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá',
    'base_price': Decimal('15.00'),
    'description': '‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø',
    'sort_order': 6
},
{
    'survey_type': 'RS_BS',
    'display_name': 'RS/BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá',
    'base_price': Decimal('20.00'),
    'description': 'RS ‡¶è‡¶¨‡¶Ç BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø',
    'sort_order': 7
},
{
    'survey_type': 'BS_RS',
    'display_name': 'BS/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá',
    'base_price': Decimal('20.00'),
    'description': 'BS ‡¶è‡¶¨‡¶Ç RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø',
    'sort_order': 8
},
{
    'survey_type': 'CS_SA',
    'display_name': 'CS/SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá',
    'base_price': Decimal('18.00'),
    'description': 'CS ‡¶è‡¶¨‡¶Ç SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø',
    'sort_order': 9
},
{
    'survey_type': 'SA_CS',
    'display_name': 'SA/CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá',
    'base_price': Decimal('18.00'),
    'description': 'SA ‡¶è‡¶¨‡¶Ç CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø',
    'sort_order': 10
}
```

### 2. Frontend: `SurveyPricingApi.js`
Updated `extractSurveyType()` function to recognize new survey types:

```javascript
export const extractSurveyType = (khatianType) => {
  const normalized = khatianType.toUpperCase().trim();
  
  // Check for exact matches (order matters - check longer strings first)
  if (normalized === 'SA_RS' || normalized === 'SA/RS') return 'SA_RS';
  if (normalized === 'RS_BS' || normalized === 'RS/BS') return 'RS_BS';
  if (normalized === 'BS_RS' || normalized === 'BS/RS') return 'BS_RS';
  if (normalized === 'CS_SA' || normalized === 'CS/SA') return 'CS_SA';
  if (normalized === 'SA_CS' || normalized === 'SA/CS') return 'SA_CS';
  if (normalized === 'DIYARA' || normalized === '‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ') return 'DIYARA';
  // ... existing code
};
```

### 3. Database Population
Ran command: `python manage.py populate_survey_pricing`

**Result**:
```
‚úÖ Created: DIYARA - ‡ß≥15.00
‚úÖ Created: RS_BS - ‡ß≥20.00
‚úÖ Created: BS_RS - ‡ß≥20.00
‚úÖ Created: CS_SA - ‡ß≥18.00
‚úÖ Created: SA_CS - ‡ß≥18.00

‚ú® Complete! Created: 5, Updated: 5
```

## üéØ Detection Logic

### Path-Based Detection
Files with these survey types in their path will be automatically detected:

#### Example Paths:
```
‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶æ‡¶á‡¶≤/‡¶¢‡¶æ‡¶ï‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó/‡¶´‡¶∞‡¶ø‡¶¶‡¶™‡ßÅ‡¶∞/‡¶®‡¶ó‡¶∞‡¶ï‡¶æ‡¶®‡ßç‡¶¶‡¶æ/DIYARA/file.pdf
‚Üí Detected: DIYARA ‚Üí Price: ‡ß≥15

‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶æ‡¶á‡¶≤/‡¶¢‡¶æ‡¶ï‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó/‡¶Æ‡ßÅ‡¶®‡ßç‡¶∏‡¶ø‡¶ó‡¶û‡ßç‡¶ú/‡¶∂‡ßç‡¶∞‡ßÄ‡¶®‡¶ó‡¶∞/RS_BS/file.jpg
‚Üí Detected: RS_BS ‚Üí Price: ‡ß≥20

‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶æ‡¶á‡¶≤/‡¶¢‡¶æ‡¶ï‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó/‡¶´‡¶∞‡¶ø‡¶¶‡¶™‡ßÅ‡¶∞/‡¶∏‡¶æ‡¶≤‡¶•‡¶æ/BS_RS/file.pdf
‚Üí Detected: BS_RS ‚Üí Price: ‡ß≥20

‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶æ‡¶á‡¶≤/‡¶¢‡¶æ‡¶ï‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó/‡¶¢‡¶æ‡¶ï‡¶æ/‡¶ß‡¶æ‡¶Æ‡¶∞‡¶æ‡¶á/CS_SA/file.jpg
‚Üí Detected: CS_SA ‚Üí Price: ‡ß≥18

‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶æ‡¶á‡¶≤/‡¶¢‡¶æ‡¶ï‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó/‡¶®‡¶æ‡¶∞‡¶æ‡¶Ø‡¶º‡¶£‡¶ó‡¶û‡ßç‡¶ú/‡¶∞‡ßÇ‡¶™‡¶ó‡¶û‡ßç‡¶ú/SA_CS/file.pdf
‚Üí Detected: SA_CS ‚Üí Price: ‡ß≥18
```

### Matching Patterns
The system will detect these variations:

| Input | Detected As | Price |
|-------|-------------|-------|
| `DIYARA` | DIYARA | ‡ß≥15 |
| `‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ` | DIYARA | ‡ß≥15 |
| `RS_BS` | RS_BS | ‡ß≥20 |
| `RS/BS` | RS_BS | ‡ß≥20 |
| `BS_RS` | BS_RS | ‡ß≥20 |
| `BS/RS` | BS_RS | ‡ß≥20 |
| `CS_SA` | CS_SA | ‡ß≥18 |
| `CS/SA` | CS_SA | ‡ß≥18 |
| `SA_CS` | SA_CS | ‡ß≥18 |
| `SA/CS` | SA_CS | ‡ß≥18 |

## üß™ Testing Guide

### Test Case 1: DIYARA Files
1. Search for files in DIYARA folder
2. **Expected Price**: ‡ß≥15 per file
3. **Badge**: ‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá

### Test Case 2: RS_BS Files
1. Search for files in RS_BS or RS/BS folder
2. **Expected Price**: ‡ß≥20 per file
3. **Badge**: RS/BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá

### Test Case 3: BS_RS Files
1. Search for files in BS_RS or BS/RS folder
2. **Expected Price**: ‡ß≥20 per file
3. **Badge**: BS/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá

### Test Case 4: CS_SA Files
1. Search for files in CS_SA or CS/SA folder
2. **Expected Price**: ‡ß≥18 per file
3. **Badge**: CS/SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá

### Test Case 5: SA_CS Files
1. Search for files in SA_CS or SA/CS folder
2. **Expected Price**: ‡ß≥18 per file
3. **Badge**: SA/CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá

### Test Multiple Files:
| Files | Survey Type | Unit Price | Total |
|-------|-------------|------------|-------|
| 1 file | DIYARA | ‡ß≥15 | ‡ß≥15 |
| 10 files | RS_BS | ‡ß≥20 | ‡ß≥200 |
| 5 files | CS_SA | ‡ß≥18 | ‡ß≥90 |
| 20 files | BS_RS | ‡ß≥20 | ‡ß≥400 |
| 100 files | SA_CS | ‡ß≥18 | ‡ß≥1,800 |

## üìã API Response Example

### GET `/api/survey-pricing/`
```json
{
  "success": true,
  "survey_types": [
    {
      "id": 1,
      "survey_type": "SA_RS",
      "display_name": "SA/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
      "base_price": "15.00",
      "is_active": true,
      "sort_order": 1
    },
    // ... existing types ...
    {
      "id": 6,
      "survey_type": "DIYARA",
      "display_name": "‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
      "base_price": "15.00",
      "is_active": true,
      "sort_order": 6
    },
    {
      "id": 7,
      "survey_type": "RS_BS",
      "display_name": "RS/BS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
      "base_price": "20.00",
      "is_active": true,
      "sort_order": 7
    },
    {
      "id": 8,
      "survey_type": "BS_RS",
      "display_name": "BS/RS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
      "base_price": "20.00",
      "is_active": true,
      "sort_order": 8
    },
    {
      "id": 9,
      "survey_type": "CS_SA",
      "display_name": "CS/SA ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
      "base_price": "18.00",
      "is_active": true,
      "sort_order": 9
    },
    {
      "id": 10,
      "survey_type": "SA_CS",
      "display_name": "SA/CS ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
      "base_price": "18.00",
      "is_active": true,
      "sort_order": 10
    }
  ]
}
```

### POST `/api/survey-pricing/calculate/`
```json
// Request for DIYARA
{
  "survey_type": "DIYARA",
  "file_count": 10
}

// Response
{
  "success": true,
  "pricing": {
    "survey_type": "DIYARA",
    "display_name": "‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡ßá",
    "price_per_file": 15.00,
    "file_count": 10,
    "total_price": 150.00
  }
}
```

## üîÑ Migration Notes

### For Existing Installations:
1. Pull latest code
2. Run: `python manage.py populate_survey_pricing`
3. Restart Django server
4. Restart React dev server
5. Clear browser cache

### For Production Deployment:
```bash
# SSH to production server
ssh user@api.bdmouza.com

# Navigate to project
cd /path/to/mouzabd/server

# Pull changes
git pull origin main

# Activate virtual environment (if using)
source venv/bin/activate

# Run populate command
python manage.py populate_survey_pricing

# Restart server
sudo systemctl restart gunicorn
```

## üìä Statistics

### Before:
- Total Survey Types: **5**
- Price Range: ‡ß≥15 - ‡ß≥25
- Unique Price Points: 3 (‡ß≥15, ‡ß≥20, ‡ß≥25)

### After:
- Total Survey Types: **10** (+5)
- Price Range: ‡ß≥15 - ‡ß≥25 (same)
- Unique Price Points: 4 (‡ß≥15, ‡ß≥18, ‡ß≥20, ‡ß≥25) (+1)

### New Price Point:
- **‡ß≥18.00**: CS_SA, SA_CS (middle ground between CS and SA)

## ‚úÖ Benefits

### 1. **More Granular Pricing**
- Combination survey types (RS_BS, CS_SA) have their own prices
- Better reflects actual survey type costs

### 2. **Regional Support**
- DIYARA (‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ) for specific regional surveys
- Bengali name recognition built-in

### 3. **Flexible Pricing**
- ‡ß≥18 price point for hybrid surveys (CS_SA, SA_CS)
- Between CS (‡ß≥20) and SA (‡ß≥15)

### 4. **Bidirectional Support**
- RS_BS and BS_RS both supported
- CS_SA and SA_CS both supported
- Handles different naming conventions

## üöÄ Next Steps

### 1. Update File Organization
Organize files into new survey type folders:
```
‡¶Æ‡ßå‡¶ú‡¶æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶æ‡¶á‡¶≤/
  ‚îú‚îÄ‚îÄ DIYARA/
  ‚îú‚îÄ‚îÄ RS_BS/
  ‚îú‚îÄ‚îÄ BS_RS/
  ‚îú‚îÄ‚îÄ CS_SA/
  ‚îî‚îÄ‚îÄ SA_CS/
```

### 2. Test All Variations
- Test path detection
- Test price calculation
- Test checkout flow
- Test admin interface

### 3. Monitor Usage
Track which survey types are most used:
- Check purchase statistics
- Analyze popular survey types
- Adjust pricing if needed

## üìù Checklist

### Implementation:
- [x] Add new survey types to populate command
- [x] Update frontend detection logic
- [x] Run populate command
- [x] Verify database entries
- [x] Test API endpoints

### Testing:
- [ ] Test DIYARA detection and pricing
- [ ] Test RS_BS detection and pricing
- [ ] Test BS_RS detection and pricing
- [ ] Test CS_SA detection and pricing
- [ ] Test SA_CS detection and pricing
- [ ] Test Bengali name detection (‡¶¶‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶æ)
- [ ] Test slash variations (RS/BS vs RS_BS)

### Documentation:
- [x] Document new survey types
- [x] Update pricing table
- [x] Create migration guide
- [x] Document API examples

---

**Status**: ‚úÖ **COMPLETED**  
**New Survey Types**: 5 (DIYARA, RS_BS, BS_RS, CS_SA, SA_CS)  
**Total Survey Types**: 10  
**Database Updated**: Yes (5 created, 5 updated)  
**Frontend Updated**: Yes (detection logic enhanced)

